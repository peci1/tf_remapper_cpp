<html><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<title>tf_remapper_cpp: TF remapper (more efficient and versatile C++ version)</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.8.7 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">TF remapper (more efficient and versatile C++ version) </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="https://opensource.org/licenses/BSD-3-Clause">![License](https://img.shields.io/badge/License-BSD%203--Clause-blue.svg)</a> <a href="https://codecov.io/gh/tradr-project/tf_remapper_cpp">![codecov](https://codecov.io/gh/tradr-project/tf_remapper_cpp/branch/master/graph/badge.svg)</a></p>
<p>This package is an alternative to official ROS node <a href="https://github.com/ros/geometry/blob/melodic-devel/tf/scripts/tf_remap">tf/tf_remap</a> with the following advantages:</p>
<ul>
<li>Works natively with <b>TF2</b><ul>
<li>that could probably save a few data conversions</li>
</ul>
</li>
<li><b>Performance</b>: handles tens of TF subscribers with thousands of TF messages/sec with ease<ul>
<li>the official node fully utilizes 2 i7 CPU cores if you have 10 subscribers and publish 2000 TF messages per second</li>
<li>this package needs about 0.4 CPU cores for the same</li>
</ul>
</li>
<li>Can also remap **<code>/tf_static</code>**<ul>
<li>the official package can not do that correctly</li>
</ul>
</li>
<li>Can also <b>remove frames</b> (if you pass empty string to <code>new</code>)<ul>
<li>this can come handy if you e.g. want to recompute your map in bagfiles using a brand new algorithm</li>
</ul>
</li>
<li>Can <b>work in both ways</b><ul>
<li>not only taking frames published on <code>/tf_old</code> and remapping and publishing them to <code>/tf</code>, but it can also watch <code>/tf</code>, perform a reverse remapping, and publish new TF messages to <code>/tf_old</code></li>
<li>this can come handy if you e.g. want to run your robot in a restricted world where it does not know about the other robots (it has its own <code>/map</code> frame), and then you have a multirobot coordination algorithm which wants to see the maps of each robot as <code>/ugv1/map</code>, <code>/ugv2/map</code> and so on, and also wants to publish a <code>/global_map</code> frame available to all robots.</li>
</ul>
</li>
<li>Backwards <b>compatible with <a href="https://github.com/ros/geometry/blob/melodic-devel/tf/scripts/tf_remap">tf/tf_remap</a></b><ul>
<li>to use this remapper, just change package name from <code>tf</code> to <code><a class="el" href="namespacetf__remapper__cpp.html">tf_remapper_cpp</a></code> in your launch files</li>
<li>all the new functionality should not endanger the basic usage, since the package is accompanied by an exhaustive test suite</li>
</ul>
</li>
<li><a href="https://tradr-project.github.io/tf_remapper_cpp/md_README.html">API Documentation</a> and <a href="#example-usage-in-launch-files">usage examples</a><ul>
<li>the remapping logic is available in dynamic library <code>libtf_remapper_cpp.so</code>, class <a href="https://tradr-project.github.io/tf_remapper_cpp/classtf__remapper__cpp_1_1TfRemapper.html">`TfRemapper`</a></li>
</ul>
</li>
</ul>
<h2>Nodes</h2>
<h3>tf_remapper_cpp/tf_remap</h3>
<p>The node that performs the TF remapping.</p>
<h4>Private parameters</h4>
<ul>
<li>**<code>mappings</code>** (<code>array of dicts</code>): The rules for TF frame name remapping, e.g. <code>[{"old": "b", "new": "d"}]</code>. Each dict presents one remapping rule. Each dict contains keys <code>old</code> and <code>new</code>. If either of these keys is missing or its value is empty string, it means the TF frame should be deleted.<ul>
<li>Until <a href="https://github.com/ros/ros_comm/issues/1498">ros_comm#1498</a> is fixed, you can not pass this parameter from <code>rosrun</code> commandline - either set it in a launch file, or use `rosparam set /tf_remapper/mappings '[{"old": "b", "new": "d"}]'<code>before launching this node.</code></li>
</ul>
</li>
<li><code>**</code>static_tf<code>** (</code>bool<code>): Whether the remapper acts on static TFs or not. If not set, it is autodetected from</code>new_tf_topic_name` parameter.<ul>
<li>Static TFs need special handling, so be sure to have this parameter set correctly, otherwise it can cause performance issues (when used with non-static TFs) or incorrect operation (if not used with static TFs).</li>
<li>Autodetection checks if the <code>new_tf_topic_name</code> is <code>tf_static</code> or <code>/tf_static</code>, and if it is, then <code>static_tf</code> is set to <code>True</code>, otherwise it is set to <code>False</code>.</li>
</ul>
</li>
<li>**<code>old_tf_topic_name</code>** (<code>string</code>, default `'/tf_old'<code>): The topic on which old TFs are subscribed.</code></li>
<li><code>**</code>new_tf_topic_name<code>** (</code>string<code>, default</code>'/tf'<code>): The topic on which remapped TFs are published.</code></li>
<li><code>**</code>is_bidirectional<code>** (</code>bool<code>, default</code>False<code>): If</code>True`, the remapper will also allow passing TFs published on the "remapped end" to the "old end" via a reverse mapping.<ul>
<li>Pay special attention if you use any kind of multimaster solution or a custom topic transport. This node needs CallerIDs to be unchanged. If this contract is broken, the node will probably enter an infinite loop reacting to its own published messages.</li>
</ul>
</li>
</ul>
<h4>Subscribed topics</h4>
<ul>
<li>**<code>/tf_old</code>** (or any other topic set in <code>old_tf_topic_name</code>; type <code>tf2_ros/TFMessage</code>): The original TF messages that are to be remapped.</li>
<li>**<code>/tf</code>** (or any other topic set in <code>new_tf_topic_name</code>; only if <code>is_bidirectional == True</code>; type <code>tf2_ros/TFMessage</code>): The TF messages with remapped frames. If some node publises to this topic and this remapper is running in bidirectional mode, it sends the newly published transforms back to <code>/tf_old</code>.</li>
</ul>
<h4>Published topics</h4>
<ul>
<li>**<code>/tf</code>** (or any other topic set in <code>new_tf_topic_name</code>; type <code>tf2_ros/ TFMessage</code>): The TF messages with remapped frames.</li>
<li>**<code>/tf_old</code>** (or any other topic set in <code>old_tf_topic_name</code>; only if <code>is_bidirectional == True</code>; type <code>tf2_ros/TFMessage</code>): The original TF messages. If some node publises to <code>/tf</code> and this remapper is running in bidirectional mode, it sends the newly published transforms back to this topic.</li>
</ul>
<h2>Example usage in launch files</h2>
<h3>simple.launch</h3>
<pre class="fragment">&lt;launch&gt;
    &lt;group&gt;
        &lt;remap from="tf" to="tf_old" /&gt;

        &lt;node name="broadcaster_ab" pkg="tf" type="static_transform_publisher" args="1 2 3 4 5 6 a b 10"/&gt;

    &lt;/group&gt;

    &lt;node name="remapper" pkg="tf_remapper_cpp" type="tf_remap"&gt;
        &lt;rosparam param="mappings"&gt;[{old: b, new: c}]&lt;/rosparam&gt;
    &lt;/node&gt;


    &lt;node name="my_node" pkg="my_pkg" type="node_type" /&gt;
&lt;/launch&gt;
</pre><h3>static_tf.launch</h3>
<pre class="fragment">&lt;launch&gt;
    &lt;group&gt;
        &lt;remap from="tf_static" to="tf_static_old" /&gt;

        &lt;node name="broadcaster_ab" pkg="tf2_ros" type="static_transform_publisher" args="1 2 3 4 5 6 a b"/&gt;

    &lt;/group&gt;

    &lt;node name="remapper" pkg="tf_remapper_cpp" type="tf_remap"&gt;
        &lt;rosparam param="mappings"&gt;[{old: b, new: c}]&lt;/rosparam&gt;

    &lt;/node&gt;


    &lt;node name="my_node" pkg="my_pkg" type="node_type" /&gt;
&lt;/launch&gt;
</pre><h3>bidirectional.launch</h3>
<pre class="fragment">&lt;launch&gt;
    &lt;group&gt;
        &lt;remap from="tf" to="tf_old" /&gt;

        &lt;node name="broadcaster_ab" pkg="tf" type="static_transform_publisher" args="1 2 3 4 5 6 a b 10"/&gt;



        &lt;node name="my_node2" pkg="my_pkg" type="node_type" /&gt;
    &lt;/group&gt;

    &lt;node name="remapper" pkg="tf_remapper_cpp" type="tf_remap"&gt;
        &lt;rosparam param="mappings"&gt;[{old: b, new: c}, {old: e, new: f}]&lt;/rosparam&gt;
        &lt;param name="is_bidirectional" value="true" /&gt;
    &lt;/node&gt;


    &lt;node name="my_node" pkg="my_pkg" type="node_type" /&gt;

    &lt;node name="broadcaster_df" pkg="tf" type="static_transform_publisher" args="1 2 3 4 5 6 d f 10"/&gt;
&lt;/launch&gt;</pre> </div></div><!-- contents -->

<br clear="all" />
<hr size="1"><div style="align: right;">
<a href="http://wiki.ros.org/tf_remapper_cpp">tf_remapper_cpp</a><br />
Author(s): Martin Pecka <peckama2@fel.cvut.cz></br />
<small>autogenerated on Thu Sep 6 2018 13:56:55</small>
</div>
</body>
</html>
